<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>SUV Live-Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 2rem; }
    h1 { color: #003366; }
    .status-box { padding: 1rem; margin-bottom: 1rem; border-radius: 0.5rem; background: #fff; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    .ampel { font-size: 2rem; display: inline-block; margin-right: 1rem; }
    .gruen { color: green; }
    .gelb { color: orange; }
    .rot { color: red; }
    .domain { font-weight: bold; }
    .zeit { font-size: 0.85rem; color: #666; }
  </style>
</head>
<body>
  <h1>üîç SUV-Crawler Status</h1>
  <div class="status-box" id="status">
    Lade Daten...
  </div>

  <script>
    fetch('../data/admin_dashboard.json')
      .then(res => res.json())
      .then(data => {
        const statusBox = document.getElementById('status');
        const { last_updated, sources_checked, status } = data;

        const domains = {
          "mobile.de": "gruen",
          "autoscout24.de": "gruen",
          "willhaben.at": "gelb"
        };

        let html = `<div class='zeit'>Letzte Aktualisierung: ${last_updated}</div><ul>`;
        for (const domain of sources_checked) {
          const farbe = domains[domain] || "rot";
          html += `<li><span class="ampel ${farbe}">‚óè</span> <span class="domain">${domain}</span></li>`;
        }
        html += `</ul><p>Status: ${status}</p>`;

        statusBox.innerHTML = html;
      })
      .catch(err => {
        document.getElementById('status').innerHTML = '‚ùå Fehler beim Laden der Statusdaten.';
      });
  </script>
</body>
</html>
